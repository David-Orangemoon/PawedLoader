// ==UserScript==
// @name         PawedLoader
// @namespace    https://google.com/
// @version      0.0.1
// @description  W.I.P
// @author       Ashimee
// @match        *://turbowarp.org/*
// @match        *://staging.turbowarp.org/*
// @match        *://packager.turbowarp.org/
// @icon         https://www.google.com/s2/favicons?domain=packager.turbowarp.org
// @run-at       document-end
// @grant        none
// @license      MIT and LGPL-3.0
// ==/UserScript==
// you lose the game :trol:
/* Last build: 1712937526175 */
(async function() {
(()=>{var e={287:(e,t,s)=>{const n=s(242),r="AshimeesExample";var o;e.exports={name:"Example - Mhm",id:r,description:"a very cool addon!",lastupdate:"04/05/2024",setup:function(){o.cool=!0,console.log("Wow!")},data:o=n.getData(r)}},466:(e,t,s)=>{const n=s(242),r="Ashimee";e.exports={name:"Extension loading error catcher.",id:r,description:"Catches errors when extensions load.",lastupdate:"04/11/2024",setup:function(){},data:n.getData(r)}},242:e=>{e.exports=new class{constructor(){}getData(e){return{}}}},550:(e,t,s)=>{e.exports=class{constructor(){this.addonIds=s(426)}get addons(){const e={};return addons.forEach((t=>{const n=s(782)(`./addon-${t}/main.js`);e[t]=n})),addons}}},426:e=>{e.exports=[]},357:(e,t,s)=>{const n=s(550);e.exports=new class extends n{constructor(){super(),this.api=s(242)}load(){}}},782:(e,t,s)=>{var n={"./addon-example/main.js":287,"./addon-exterrcatch/main.js":466};function r(e){var t=o(e);return s(t)}function o(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=782},847:(e,t,s)=>{const n=s(791),r=s(878).base64ToArrayBuffer;e.exports=class{constructor(){this.assets={},this.prefix=null}async saveGZ(e,t,s){s=s??null,this.assets[e]={data:await(await new n(r(t)).extract()).text(),prefix:s}}get(e){const t=this.assets[e];return t.data?.read&&(t.data=t.data.read()),t.prefix?`${t.prefix}${t.data}`:t.data}update(e,t){const s=this.assets[e];s.data="function"!=typeof t?t:t(s.data)}}},493:(e,t,s)=>{const n=s(878).hasOwn;class r extends EventTarget{constructor(){super(),this.events={}}register(e){this.events[e]=[]}emit(e,...t){if(!n(this.events,e))return;const s=this.events[e];let r=0;for(let e=0;e<s.length;e++){const n=s[e-r];n.callback(...t),n.deleteWhenCalled&&(s.pop(e-r),r++)}}on(e,t){n(this.events,e)&&this.events[e].push({deleteWhenCalled:!1,callback:t})}once(e,t){n(this.events,e)&&this.events[e].push({deleteWhenCalled:!0,callback:t})}wipe(){for(const e in events)events[e]=[]}}e.exports=r},791:(e,t,s)=>{const{readBytes:n,readFlags:r,readString:o,readTerminatedString:i,unixTimestampToDate:a,bufferToStream:d,downloadArrayBuffer:c,downloadBlob:h,streamToBlob:l}=s(878);e.exports=class{#e;#t=0;#s;header;fileName;comment;constructor(e){this.#e=new DataView(e),this.read()}read(){if(this.header={signature:o(this.#e,0,2),compressionMethod:this.#e.getUint8(1),flags:r(this.#e,3,["ftext","fhcrc","fextra","fname","fcomment","reserved1","reserved2","reserved3"]),modificationTime:a(this.#e.getUint32(4,!0)),extraFlags:this.#e.getUint8(8),os:this.#e.getUint8(9)},this.#t=10,this.header.flags.fextra){const e=this.#e.getUint16(this.#t,!0);this.extra=n(this.#e,this.#t+2,e),this.#t+=e+2}else this.extra=[];this.header.flags.fname?(this.fileName=i(this.#e,this.#t),this.#t+=this.fileName.length+1):this.fileName="",this.header.flags.fcomment?(this.comment=i(this.#e,this.#t),this.#t+=this.comment.length+1):this.comment="",this.header.flags.fhcrc?(this.#s=this.#e.getUint16(this.#t,!0),this.#t+=2):this.#s=null,this.footer={crc:this.#e.getUint32(this.#e.byteLength-8,!0),uncompressedSize:this.#e.getUint32(this.#e.byteLength-4,!0)}}extract(){return l(d(this.#e.buffer.slice(this.#t,this.#e.byteLength-8)).pipeThrough(new DecompressionStream("deflate-raw")))}}},583:e=>{const t=document.querySelector("[class^=menu-bar_file-group]");t.querySelector("[class^=menu-bar_menu-bar-item]"),e.exports=class{constructor(e,s,n){const r=document.querySelector("div[class^=menu-bar_menu-bar-item]").cloneNode(!0);this.node=r,this.isDropdown=n??!1,this.image=s??void 0,t.appendChild(r),this.hide();const o=r.querySelectorAll("img");this.isDropdown||(o[1].remove(),r.querySelector("div[class^=menu-bar_menu-bar-menu]").remove()),this.image||o[0].remove(),this.setLabel(e)}setLabel(e){this.node.querySelector("span[class^=settings-menu_dropdown-label]").innerHTML=e}show(){this.node.style.display=""}hide(){this.node.style.display="none"}remove(){this.node.remove()}}},290:(e,t,s)=>{const n=s(493);e.exports=class extends n{constructor(){super(),this.stateObject={}}}},394:(e,t,s)=>{const n=s(352),r=n.ReduxStore,o=n.vm,i=o.runtime,a=document.location.href.includes("resources/app.asar");e.exports={version:"0.0.1",onDesktopApp:a,ScratchZ:n,ReduxStore:r,vm:o,runtime:i}},611:(e,t,s)=>{const n=s(493),{ReduxStore:r,ScratchZ:o}=s(394);e.exports=new class extends n{constructor(){super(),this._wasInEditor=this.inEditor,this._loadingGUI=!this.GUIavailable,this.register("OPENED"),this.register("OPENED/gui_events"),this.register("CLOSED"),this.register("CLOSED/gui_events"),this.register("GUI_LOADED"),r.subscribe((()=>{this._loadingGUI&&(this.GUIavailable&&(this._loadingGUI=!1),this.emit("GUI_LOADED")),this._wasInEditor!==this.inEditor&&(this._wasInEditor?this.emit("CLOSED"):this.emit("OPENED"))})),this._wasInEditor&&setTimeout((()=>{this.emit("OPENED",0)}),500),this.on("OPENED",(e=>{setTimeout((()=>this.emit("OPENED/gui_events")),e??500)})),this.on("CLOSED",(()=>{setTimeout((()=>this.emit("CLOSED/gui_events")),500)}))}get GUIavailable(){return"LOADING_VM_NEW_DEFAULT"!==this.projectState.loadingState}get inEditor(){const e=r.getState();return!!e&&!e.scratchGui.mode.isPlayerOnly}get projectState(){const e=r.getState();return!!e&&e.scratchGui.projectState}}},643:(e,t,s)=>{const n=s(701),r=s(493),o=s(583),i=s(352);e.exports=new class extends r{constructor(){super(),this.register("ASSETS_LOADED"),this.editor=s(611),this.addons=s(357),this.assets=s(658),this.styles=document.createElement("style"),this.styles.css=s(708),this._modal=null,this._menubutton=this.makeButton}get makeButton(){const e=new o("PawedLoader",null,!1);return e.node.addEventListener("click",(e=>this.menuButtonClicked(e))),e}get makeModal(){this._modal&&this._modal.remove();const e=document.createElement("dialog");return document.body.appendChild(e),e.setAttribute("paw-for","modal"),this.styles.textContent=this.styles.css.get(),e.appendChild(this.styles),this._modal=e,this.constructGUI(),e}setupAllGUI(){if(this._modal)try{this._modal.remove()}catch{}this._modal=this.makeModal,this.regenButton(),n.log("GUI Built")}async setup(){this.editor.once("GUI_LOADED",(()=>{this.editor.inEditor&&this.editor.emit("SCRATCHBLOCKS",i.Blocks),s(205)()})),this.assets.loadAssets().then((()=>{this.emit("ASSETS_LOADED"),n.log("Assets loaded!"),this.editor.on("OPENED/gui_events",(()=>this.regenButton())),this.editor.on("CLOSED/gui_events",(()=>this.regenButton())),this.setupAllGUI()}))}regenButton(){if(this._menubutton)try{this._menubutton.remove()}catch{}this._menubutton=this.makeButton,this._menubutton.show()}menuButtonClicked(e){this.show()}constructGUI(){this._modal.appendChild(s(235).ui(this))}show(){this._modal=this.makeModal,this._modal.showModal()}hide(){this._modal.innerHTML="",this._modal.remove()}}},205:(e,t,s)=>{e.exports=function(){s(850).url("data:application/javascript;base64,"+btoa("("+function(e){e.extensions.register(new class{getInfo(){return{id:"AshimeePawedLoader",name:"PawedLoader",blocks:[{blockType:e.BlockType.XML,xml:'<sep gap="0" />'}]}}}),window.Scratch=e}.toString()+")(Scratch);"))}},658:(e,t,s)=>{const n=new(s(847));n.loadAssets=async function(){await n.saveGZ("icon","H4sIAAAAAAAAA01SSW7bQBD8SoP3MqeX2QJJh9x9ygsCJpADWLERCaafn2rmEoDoITnTtfWc7h9X+fj1c//69nleihSJMSVaX+Tz9vr7fl5eHo/3L+u67/vT7k9vf66rlVJW9i2X0/Vyev/+eJEf5+W5d9ExNqjCHQOtScMIVFhBRw0xQ0+KAq1iXUIq1wY71iptSAvRJuFSZXSYyeT2EC1oDu3oxNWbxZQ6N+4QOAy1wAtmyIQ3ceNhQoJ4ynbq4ol/hSxqQkSe40byqmiIF6kqVmRSnElUREiv6C6tP0+CapCPKBVsCnSqa9AJoz+arFDnabpVbsKpHNEOs02UTOJOLszkcemalOZHpfOWhu3mNK0+NtWMgayF4fiQkdI4m5mRdE1P1tOlB4alKB3Ho6mOpvmTqohcDy1Uq5M+wUQcpD3qsv43Pq8MpbTNIuWS02dWDoTReGY5CVKdy7dJKQTh4r1sJXmIHdkGNox0TuJBF5Q29K6FezW/ZOiNCVNJ5jlBwYoooLXBkcA5rZls/NcpArwmYBZM2V8HvGY2kTZSIPEoOyVTUcl7k2HRm0TPkPhaWTWdrryseW0vfwE5q1mv9AIAAA==","data:image/svg+xml;base64,"),n.update("icon",(e=>btoa(e.replace("<svg ",'<svg style="fill:#ffffff;" '))))},e.exports=n},708:e=>{let t="\n/* css will go here */\n";e.exports={get:()=>t,set(e){t=e}}},235:(e,t,s)=>{const n=s(290),r=s(394).version;class o extends n{constructor(e,t,...s){super(...s),this.node=document.createElement(e),this.node.setAttribute("paw-for",t)}}class i extends o{constructor(e){super("div","header"),this.GUI=e,this.createHeader()}createHeader(){const e=document.createElement("div");e.appendChild(document.createTextNode("PawedLoader")),e.appendChild(document.createTextNode(`v${r}`)),e.setAttribute("paw-for","header-title");const t=document.createElement("button");t.textContent="X",t.onclick=e=>this.GUI.hide(),t.setAttribute("paw-for","modal-close"),this.node.appendChild(e),this.node.appendChild(t)}}class a extends o{constructor(e){super("div","tabs"),this.body=e,this.register("TAB_CHANGED"),this.tabNumber=e.tabNumber,this.tabs={Extensions:["Merged","Unmerged"],"N/A~1":["Packager","Addons","Themes"]}}tabClicked(e,t){this.tabNumber=Number(e.getAttribute("paw-tabNumber")),this.emit("TAB_CHANGED",this.tabNumber)}get generateTabs(){let e=0;const t=document.createElement("div");t.setAttribute("paw-for","tab-sect");for(const s of Object.entries(this.tabs)){const n=document.createTextNode(s[0]),r=document.createElement("div");r.setAttribute("paw-for","tab-sect-body");const o=s[1];for(const t of o){e++;const s=document.createElement("button");s.textContent=t,s.setAttribute("paw-for","tab-button"),s.setAttribute("paw-tabNumber",String(e)),s.setAttribute("paw-active",String(this.tabNumber===e)),s.onclick=e=>this.tabClicked(s,e),r.appendChild(s)}const i=document.createElement("div");i.setAttribute("paw-for","tab-sect-pop"),s[0].startsWith("N/A")||i.appendChild(n),i.appendChild(r),t.appendChild(i)}return t}get getNode(){return this.node.innerHTML="",this.node.appendChild(this.generateTabs),this.node}}class d extends o{constructor(){super("div","body"),this.tabNumber=1,this.tabs=new a(this),this.tabs.on("TAB_CHANGED",(e=>this.renderTab(e))),this.renderTab(this.tabNumber)}get getTab(){const e=document.createElement("div");return e.appendChild(document.createTextNode(String(this.tabNumber))),e.setAttribute("paw-for","tab-render"),e}renderTab(e){this.tabNumber=e,this.node.innerHTML="",this.node.appendChild(this.tabs.getNode),this.node.appendChild(this.getTab)}}class c extends o{constructor(){super("div","footer")}}e.exports=new class extends o{constructor(){super("paw","main")}ui(e){const t=new i(e),s=new d,n=new c;return this.node.innerHTML="",this.node.appendChild(t.node),this.node.appendChild(s.node),this.node.appendChild(n.node),this.node}}},878:e=>{function t(e,t="download.x"){const s=window.URL.createObjectURL(e),n=document.createElement("a");n.href=s,n.setAttribute("download",t),n.click(),window.URL.revokeObjectURL(s)}e.exports={wait:e=>new Promise(((t,s)=>{setTimeout(t,e)})),hasOwn:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),readBytes:function(e,t,s){const n=[];for(let r=0;r<s;r++)n.push(e.getUint8(t+r));return n},readFlags:function(e,t,s){const n={};for(let r=0;r<s.length;r++){const o=e.getUint8(t+Math.min(r/8));n[s[r]]=(1<<r&o)>>r==1}return n},readString:function(e,t,s){const n=[];for(let r=0;r<s;r++)n.push(String.fromCharCode(e.getUint8(t+r)));return n.join("")},readTerminatedString:function(e,t){const s=[];let n,r=0;for(;0!=n;)n=e.getUint8(t+r),0!=n&&s.push(String.fromCharCode(n)),r++;return s.join("")},unixTimestampToDate:function(e){return new Date(1e3*e)},bufferToStream:function(e){return new ReadableStream({start(t){t.enqueue(e),t.close()}})},downloadArrayBuffer:function(e,s){t(new Blob([e]),s)},downloadBlob:t,streamToBlob:async function(e,t){const s=e.getReader();let n=!1;const r=[];for(;!n;){const e=await s.read();n=e.done,e.value&&r.push(e.value)}return new Blob(r,{type:t})},base64ToArrayBuffer:function(e){for(var t=atob(e),s=new Uint8Array(t.length),n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer}}},701:e=>{const t="PawLoader |";e.exports={log:(...e)=>console.log(t,...e),warn:(...e)=>console.warn(t,...e),error:(...e)=>console.error(t,...e)}},850:(e,t,s)=>{const{vm:n,runtime:r}=s(394);e.exports={plugin:function(e){var t=new e(r),s=n.extensionManager._registerInternalExtension(t);n.extensionManager._loadedExtensions.set(t.getInfo().id,s)},url:async function(e){const t=n.extensionManager,s=t.securityManager,r=s.getSandboxMode;s.getSandboxMode=function(){return"unsandboxed"},await t.loadExtensionURL(e),s.getSandboxMode=r}}},352:e=>{const t=new class{constructor(){this.c_gbw="gui_blocks-wrapper",this.__rc="__reactContainer",this.__rii="__reactInternalInstance$";const e=window.Scratch||{};this.BlockType=e?.BlockType||{BOOLEAN:"Boolean",BUTTON:"button",LABEL:"label",COMMAND:"command",CONDITIONAL:"conditional",EVENT:"event",HAT:"hat",LOOP:"loop",REPORTER:"reporter",XML:"xml"},this.ArgumentType=e?.ArgumentType||{ANGLE:"angle",BOOLEAN:"Boolean",COLOR:"color",NUMBER:"number",STRING:"string",MATRIX:"matrix",NOTE:"note",IMAGE:"image",COSTUME:"costume",SOUND:"sound"},this.TargetType=e?.TargetType||{SPRITE:"sprite",STAGE:"stage"}}get on_projectPage(){return"object"==typeof this.ReduxState?.scratchGui}get on_homePage(){return"object"==typeof this.ReduxState?.splash}get on_profilePage(){return!!app?.profileModel?.getId?.()}get on_messagesPage(){return"string"==typeof this.ReduxState?.messages?.status?.clear&&!this.on_homePage}get gbWrapper(){return document.querySelector(`[class^="${this.c_gbw}"]`)}get containerKey(){return(Object.keys(app)||[]).find((e=>e.startsWith(this.__rc)))}get instanceKey(){return Object.keys(this.gbWrapper||{}).find((e=>e.startsWith(this.__rii)))}get ReduxStore(){return app[this.containerKey]?.child?.stateNode?.store}get ReduxState(){return this.ReduxStore?.getState?.()}get vm(){return window.vm||this.ReduxState?.scratchGui?.vm}get Blocks(){if("object"==typeof window?.ScratchBlocks)return window.ScratchBlocks;const e=Object.entries(this.gbWrapper||{}).find((e=>e[0].startsWith(this.__rii)))?.[1];if(!e)return;let t=e;for(;t&&!t?.stateNode?.ScratchBlocks;)t=t.child;return t.stateNode.ScratchBlocks}};let s=t;vm.on("CREATE_UNSANDBOXED_EXTENSION_API",(e=>(e=>{s=e,e.ReduxStore=t.ReduxStore,e.ReduxState=t.ReduxState,e?.gui&&e.gui.getBlockly().then((t=>e.Blocks=t))})(e))),e.exports=(new class{get instance(){return s}}).instance}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,s),o.exports}s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=s(701),t=s(394).vm,n=s(643);n.setup(),n.addons.load(),e.log("Loaded."),t.paw=n,t.paw._loadRequire=()=>{if(t.paw.require)return t.paw.require;try{return t.paw.require=s,t.paw.require}catch{console.error("Failed to expose __webpack_require_")}}})()})();
//# sourceMappingURL=bundle.js.map
})();